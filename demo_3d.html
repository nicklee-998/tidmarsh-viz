<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title>DEMO 3D</title>
	<style>
		html, body {
			height: 100%;
			margin: 0px;
			padding: 0px;
			overflow: hidden;
		}

		#stats { position: absolute; top:0; left: 0 }
		#stats #fps { background: transparent !important }
		#stats #fps #fpsText { color: #aaa !important }
		#stats #fps #fpsGraph { color: #0040ff }
	</style>
</head>

<body>
<div id="state"></div>
<div id="playground"></div>

<script src="./libs/three.min.js"></script>
<script src="./libs/d3.js"></script>
<script src="./libs/jquery-1.11.1.min.js"></script>
<script src="./js/controls/OrbitControls.js"></script>
<script src="./js/libs/stats.min.js"></script>
<script src="./scripts2/view/PowerView.js"></script>
<script>

	var container, scene, renderer, camera, controls, sw, sh;

	$(document).ready(function() {

		init3d();

	});

	function init3d()
	{
		container = $("#playground");
		sw = window.innerWidth;
		sh = window.innerHeight;

		// Setup the renderer
		renderer = new THREE.WebGLRenderer({ antialias:true });
		renderer.setSize(sw, sh);
		renderer.setClearColor( 0x202428, 1 );
		renderer.sortObjects = true;

		// Setup the camera
		camera = new THREE.PerspectiveCamera(45, sw / sh, 0.1, 10000);
		camera.position.y = 1000;
		camera.position.z = 1000;

		// Setup the scene
		scene = new THREE.Scene();
		//scene.fog = new THREE.Fog(0xffffff, 4000, 4000);
		scene.add(camera);
		container.append(renderer.domElement);

		// STATS
		stats = new Stats();
		$("#state").append(stats.domElement);

		// CONTROLS
		controls = new THREE.OrbitControls(camera, renderer.domElement);
		controls.autoRotate = false;
		//controls.noZoom = true;
		//controls.noRotate = true;
		//controls.noPan = true;

		// Handling window resize
		window.addEventListener("resize", function() {
			sw = window.innerWidth;
			sh = window.innerHeight;
			renderer.setSize(sw, sh);
			camera.aspect = sw / sh;
			camera.updateProjectionMatrix();
		});

		createWorld();
		animate();
	}

	function createWorld()
	{
//		var box = new THREE.Mesh(
//			new THREE.BoxGeometry(100, 100, 100),
//			new THREE.MeshBasicMaterial({color: 0xff0000})
//		);
//		scene.add(box);

		var powerview = new PowerView(scene);
		powerview.genMonthGraph(2015, 2);
	}

	function animate()
	{
		requestAnimationFrame(animate);
		render();
		stats.update();
	}

	function render()
	{
		renderer.render(scene, camera);
		controls.update();
	}

</script>

</body>
</html>